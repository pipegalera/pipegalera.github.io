<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://www.pipegalera.com/ name=base><title>
            
                Using my desktop GPU remotely via Tailscale
            
        </title><meta content="Using my desktop GPU remotely via Tailscale" property=og:title><meta content="Magic software to avoid port routing, gateway router config, fail2ban, and even ssh keys." property=og:description><meta content="Magic software to avoid port routing, gateway router config, fail2ban, and even ssh keys." name=description><link href=https://cdn.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/@fontsource/space-grotesk@4.5.8/index.min.css rel=stylesheet><script src=https://www.pipegalera.com/js/codeblock.js></script><script src=https://www.pipegalera.com/js/toc.js></script><script src=https://www.pipegalera.com/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://www.pipegalera.com/atom.xml rel=alternate title=~/.pipe_galera type=application/atom+xml><link href=https://www.pipegalera.com/theme/light.css rel=stylesheet><link href=https://www.pipegalera.com/main.css media=screen rel=stylesheet><script src="https://www.pipegalera.com/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://www.pipegalera.com/>~/.pipe_galera</a><div class=socials><a class=social href=https://www.linkedin.com/in/pipegalera/ rel=me> <img alt=linkedin src=https://www.pipegalera.com/icons/social/linkedin.svg> </a><a class=social href=https://github.com/pipegalera/ rel=me> <img alt=github src=https://www.pipegalera.com/icons/social/github.svg> </a></div></div><nav><a href=https://www.pipegalera.com/posts style=margin-left:.25em>/posts</a><a href=https://www.pipegalera.com/mostly_books style=margin-left:.25em>/mostly_books</a><a href=https://www.pipegalera.com/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://www.pipegalera.com/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div></nav></header><main><article><div class=title><div class=page-header>Using my desktop GPU remotely via Tailscale<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2024-03-17</time> :: 1442 Words <span class=tags-label>:: Tags:</span><span class=tags> <a class=post-tag href=https://www.pipegalera.com/tags/cloud/>cloud</a> , <a class=post-tag href=https://www.pipegalera.com/tags/ide/>ide</a> , <a class=post-tag href=https://www.pipegalera.com/tags/ssh/>ssh</a> </span></div></div><div class=toc-container><h1 class=toc-title>Table of Contents</h1><ul class=toc-list><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#1-case-problem>1. Case problem</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#2-installing-ubuntu-server>2. Installing Ubuntu Server</a> <ul><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#bios-options>Bios options</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#download-the-latest-ubuntu-server-lts-from-their-website>Download the latest Ubuntu Server LTS from their website</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#settings-during-installation>Settings during installation</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#set-some-basic-initial-package-installation-and-connect-to-the-wifi>Set some basic initial package installation and connect to the WiFi</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#install-the-other-packages-you-need>Install the other packages you need</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#optional-for-dual-boot-with-windows-in-the-same-hard-drive>Optional. For dual boot with Windows in the same hard drive</a></ul><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#3-connecting-your-laptop-to-your-server-with-tailscale>3. Connecting your laptop to your server with Tailscale</a> <ul><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#setting-up-a-tailscale-ssh>Setting up a Tailscale SSH</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#set-up-vscode-for-ssh>Set up VSCode for SSH</a></ul><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#4-automatic-turn-on-remotely-with-a-smart-plug>4. Automatic turn on remotely with a smart plug</a><li><a href=https://www.pipegalera.com/posts/ubuntu-server-tailscale/#5-final-thoughts-and-benefits-vs-cloud-computing>5. Final thoughts and benefits vs cloud computing</a></ul></div><section class=body><p>In this post I’ll explain how I connect to my gaming pc via SSH with my laptop completely remotely (and securely).<p><img alt src=https://www.pipegalera.com/posts/ubuntu-server-tailscale/./images/remote_desktop.png> <em>My MacBook Pro connected from the public library wifi to my home pc.</em><p>No need for port routing, gateway router config, fail2ban...not even touching ssh/config!<h2 id=1-case-problem><a aria-label="Anchor link for: 1-case-problem" class=zola-anchor href=#1-case-problem>1. Case problem</a></h2><p>Some months ago I wrote <a href=https://pipegalera.com/posts/aws-instance-vscode/>a post</a> about connecting VSCode to an AWS instance. I was using AWS instances this way to train small ml models for panel data. You can also train models in your laptop, but it takes much longer without a good GPU.<p>The problem is that it can become expensive running instances with GPUs fairly quick. It sucked that every model or little experiment I run cost money.<p>Then it hit me... Why am I paying for a GPU when I do have a powerful GPU in my gaming pc?<p>It must be a way to connect my laptop to my home pc and use it as a server.<p>And yes it is, and it’s fairly easy.<p>I have to admit It took me 2 weeks to discover “the easy way” described in this post. Following the steps below should take ~2 hours to get everything up and running.<p>The only thing you need is a laptop (client), a home pc (server) and a $10 smart plug (e.g. <em>TP-Link Tapo Smart WLAN Socket</em>).<h2 id=2-installing-ubuntu-server><a aria-label="Anchor link for: 2-installing-ubuntu-server" class=zola-anchor href=#2-installing-ubuntu-server>2. Installing Ubuntu Server</a></h2><p>This covers installation and server configuration.<h3 id=bios-options><a aria-label="Anchor link for: bios-options" class=zola-anchor href=#bios-options>Bios options</a></h3><p>I needed to go to my MOBO bios settings (click <code>Del</code> when the pc is turning on) and change 2 options before installing Ubuntu, otherwise the installation crashed:<ol><li><code>Security -> Secure Boot -> Disable</code><li><code>Advanced -> Settings -> Integrated graphics configuration -> Disable</code></ol><p>After that, reboot.<h3 id=download-the-latest-ubuntu-server-lts-from-their-website><a aria-label="Anchor link for: download-the-latest-ubuntu-server-lts-from-their-website" class=zola-anchor href=#download-the-latest-ubuntu-server-lts-from-their-website>Download the latest Ubuntu Server LTS from <a href=https://ubuntu.com/download/server>their website</a></a></h3><p>Burn it into a usb stick with <a href=https://etcher.balena.io/>etcher balena</a> or <a href=https://rufus.ie/en/>rufus</a>.<h3 id=settings-during-installation><a aria-label="Anchor link for: settings-during-installation" class=zola-anchor href=#settings-during-installation>Settings during installation</a></h3><p>Boot the pc from the USB stick and install Ubuntu Server in in a second hard drive or a partition. It doesn’t matter much, but I recommend using a second drive if you have an spare one around.<p>Settings:<pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>- </span><span style=color:#859900>[</span><span>X</span><span style=color:#859900>]</span><span> Search for third-party drivers
</span><span style=color:#b58900>- </span><span style=color:#859900>[ ]</span><span> Set up this disk as an LVM group
</span><span style=color:#b58900>- </span><span style=color:#859900>[</span><span>X</span><span style=color:#859900>]</span><span> Install OpenSSH server
</span></code></pre><p>After the installation is done, remove the usb stick and boot into the Ubuntu server.<p>You might need to change the boot priorities in the bios if the initial reboot goes into Windows or whatever OS you have alongside Ubuntu Server.<h3 id=set-some-basic-initial-package-installation-and-connect-to-the-wifi><a aria-label="Anchor link for: set-some-basic-initial-package-installation-and-connect-to-the-wifi" class=zola-anchor href=#set-some-basic-initial-package-installation-and-connect-to-the-wifi>Set some basic initial package installation and connect to the WiFi</a></h3><p>To install the dependencies the server must be connected to the internet via ethernet cable.<p>The first thing I did is increasing the font of the terminal, so I didn’t have to squish my eyes every time I look at the screen:<pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>sudo</span><span> nano /etc/default/console-setup
</span><span style=color:#b58900>---</span><span style=color:#657b83>></span><span>  FONTFACE="</span><span style=color:#2aa198>Terminus</span><span>"
</span><span style=color:#b58900>---</span><span style=color:#657b83>></span><span>  FONTSIZE="</span><span style=color:#2aa198>16x32</span><span>"
</span><span style=color:#b58900>sudo</span><span> update-initramfs</span><span style=color:#268bd2> -u
</span></code></pre><p>Reboot by typing <code>reboot</code>.<p>After rebooting, I updated the system and prepared the network options.<pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>sudo</span><span> apt-get update
</span><span style=color:#b58900>systemctl</span><span> disable systemd-networkd-wait-online.service
</span><span style=color:#b58900>systemctl</span><span> mask systemd-networkd-wait-online.service
</span><span style=color:#b58900>sudo</span><span> systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
</span><span style=color:#b58900>sudo</span><span> apt install network-manager
</span></code></pre><p>The above commands:<ul><li>Update the system.<li>Avoid the system waiting 2 minutes every booth for the ethernet connection (server will be connected via WiFi).<li>Avoid the system to go to sleep/suspend/hibernate causing ssh to time out.<li>Install a network manager to connect via WiFi.</ul><p>Once the network manager is installed I followed network-manager basic guide to connect to the WiFi: https://ubuntu.com/core/docs/networkmanager/configure-wifi-connections<p>Done with the basic configuration.<h3 id=install-the-other-packages-you-need><a aria-label="Anchor link for: install-the-other-packages-you-need" class=zola-anchor href=#install-the-other-packages-you-need>Install the other packages you need</a></h3><p>This depends on the use of the server, for me it’s usually:<ul><li>The proprietary NVIDIA GPU drivers</ul><p>Check the latest driver available at <a href=https://www.nvidia.com/en-us/drivers/unix/>this NVIDIA website</a><pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>sudo</span><span> add-apt-repository ppa:graphics-drivers/ppa
</span><span style=color:#b58900>sudo</span><span> ubuntu-drivers install nvidia:550
</span></code></pre><ul><li>Miniconda</ul><pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>wget</span><span> https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
</span><span style=color:#b58900>bash</span><span> Miniconda3-latest-Linux-x86_64.sh</span><span style=color:#268bd2> -b
</span><span style=color:#859900>cd</span><span> miniconda3/bin
</span><span style=color:#b58900>./conda</span><span> init bash
</span></code></pre><ul><li>A few utility packages</ul><pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>sudo</span><span> apt install neofetch
</span><span style=color:#b58900>sudo</span><span> update-pciids
</span><span style=color:#b58900>sudo</span><span> apt install net-tools
</span></code></pre><h3 id=optional-for-dual-boot-with-windows-in-the-same-hard-drive><a aria-label="Anchor link for: optional-for-dual-boot-with-windows-in-the-same-hard-drive" class=zola-anchor href=#optional-for-dual-boot-with-windows-in-the-same-hard-drive>Optional. For dual boot with Windows in the same hard drive</a></h3><p>I use the pc for gaming in Windows 11, not only as a server. So I needed a way to select Windows if I wanted to play games when the pc boots.<ol><li>Make sure Ubuntu Server is the first option to boot in the bios.<li>Activate the GRUB menu in the Ubuntu Server and setting it to 10 seconds.</ol><pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>sudo</span><span> nano /etc/default/grub
</span><span style=color:#b58900>---</span><span style=color:#657b83>></span><span>  GRUB_TIMEOUT=10
</span><span style=color:#b58900>---</span><span style=color:#657b83>></span><span>  GRUB_TIMEOUT_STYLE=menu
</span><span style=color:#b58900>sudo</span><span> update-grub
</span></code></pre><p>This way it will boot on the menu and it’ll give 10 secs to select Ubuntu Server or Windows 11.<h2 id=3-connecting-your-laptop-to-your-server-with-tailscale><a aria-label="Anchor link for: 3-connecting-your-laptop-to-your-server-with-tailscale" class=zola-anchor href=#3-connecting-your-laptop-to-your-server-with-tailscale>3. Connecting your laptop to your server with Tailscale</a></h2><p><img alt src=https://www.pipegalera.com/posts/ubuntu-server-tailscale/./images/tailscale.jpg><h3 id=setting-up-a-tailscale-ssh><a aria-label="Anchor link for: setting-up-a-tailscale-ssh" class=zola-anchor href=#setting-up-a-tailscale-ssh>Setting up a Tailscale SSH</a></h3><ol><li>Install Tailscale in the client (e.g.laptop):</ol><p>https://tailscale.com/download<ol start=2><li>Install Tailscale in the server (Ubuntu Server):</ol><pre class=language-bash data-lang=bash style=color:#839496;background-color:#002b36><code class=language-bash data-lang=bash><span style=color:#b58900>curl</span><span style=color:#268bd2> -fsSL</span><span> https://tailscale.com/install.sh </span><span style=color:#859900>| </span><span style=color:#b58900>sh
</span></code></pre><p>Run <code>sudo tailscale up</code> and it will give you a website to visit in your client (e.g. <em>https//login.tailscale.com/a/1204ecba01999</em>). After login in to the website, it should say "Success." in the server terminal.<p>Run <code>sudo tailscale set --shh</code> to set the ssh profile.<ol start=3><li>Into your Tailscale profile (https://login.tailscale.com/admin/machines) it should appear both machines, and the tag <code>SSH</code> under your server info</ol><p><img alt src=https://www.pipegalera.com/posts/ubuntu-server-tailscale/./images/tailscale_screenshot.png><p>Try typing <code>ssh root@{the server name}</code> from the terminal and check that the client connects:<p><img alt src=https://www.pipegalera.com/posts/ubuntu-server-tailscale/./images/connection.png><p>After setting up Tailscale I could securely log in into my home pc from other networks.<h3 id=set-up-vscode-for-ssh><a aria-label="Anchor link for: set-up-vscode-for-ssh" class=zola-anchor href=#set-up-vscode-for-ssh>Set up VSCode for SSH</a></h3><p>Once the connection is created, to set up VSCode:<ol><li>Install the <a href="https://marketplace.visualstudio.com/items?itemName=Tailscale.vscode-tailscale">Tailscale VSCode extension</a>.<li>Click on the side panel Tailscale icon. Your server will appear, right click on it -> <code>Add to SSH config file</code>.<li><a href=https://code.visualstudio.com/docs/remote/ssh-tutorial>Install Remote-SSH</a>.<li>Open Command Palette(<code>Cmd+Shift+P</code>) and search “Connect host” and the server name will pop up to connect.</ol><h2 id=4-automatic-turn-on-remotely-with-a-smart-plug><a aria-label="Anchor link for: 4-automatic-turn-on-remotely-with-a-smart-plug" class=zola-anchor href=#4-automatic-turn-on-remotely-with-a-smart-plug>4. Automatic turn on remotely with a smart plug</a></h2><p><img alt src=https://www.pipegalera.com/posts/ubuntu-server-tailscale/./images/tapo.png><p>This is the cherry on top of the cake.<p>I can always turn off the pc server remotely by typing <code>poweroff</code> in the terminal . But <strong>how do I turn the server on if the home pc is not powered on?</strong><p>We'll use a trick with a smart plug and a bios functionality for that.<p>Most bios have a <em>Wake on power</em> mode that basically turn on the computer once they receive electric power from. On my MSI mobo bios, the option is: <code>Advanced -> APM Configuration -> "Restore AC Power Loss" -> Enable</code>.<p>With this setting, the pc will turn on every time it receives electric current.<p>By using a smart plug I can control the electric current that goes to the plug from the phone app - So I can power on the computer from the phone.<p>Example use:<ul><li>Remotely, I go to the smart plug app and activate the plug (0 to 1 electricity). The computer turn on and I can access via SSH.<li>I turn it off using <code>poweroff</code> since I don’t need it.<li>I got an idea and need the server GPU again. I go to app, turn off the plug and on again and the computer turns on.</ul><p>It’s more difficult to explain than to do. It honestly takes one or two taps on the phone and the server pc is turned on.<h2 id=5-final-thoughts-and-benefits-vs-cloud-computing><a aria-label="Anchor link for: 5-final-thoughts-and-benefits-vs-cloud-computing" class=zola-anchor href=#5-final-thoughts-and-benefits-vs-cloud-computing>5. Final thoughts and benefits vs cloud computing</a></h2><p>It was surprisingly easy setting up the server once I discovered Tailscale. This solution for running “small” models remotely is:<ul><li><strong>Way cheaper than cloud</strong>.</ul><p>The cost of electricity is negligible since new NVIDIA GPUs are very efficient and the server can be turn on and off on command. Smart plugs cost <$10 and can be reused for other smart-home stuff.<p>This obviously only applies if you have a home pc to use as a server, but it doesn't need a fancy GPU - reusing any GPU will cost less than paying for a GPU to a third party.<ul><li><strong>Headache free</strong>.</ul><p>I had little nightmares about forgetting to turn off the instance and waking up the next day with a hole in my wallet.<p>I can let run a couple of experiments freely while doing other things without having a constant thought of having to go back to close the AWS.<ul><li><strong>Dead simple</strong>.</ul><p>I open the smart plug app on the phone to turn on the server and open VSCode on my laptop. 30 seconds and I'm in.<p>That’s it.<p>No need to go to AWS to open an instance, not changing the SSH config to the instance dynamic ip, no Terraform, no products I do not need.<ul><li><strong>Increased productivity</strong>.</ul><p>I can make stupid experiments, weird test and tinkering in general with models - which translates into more coding hours.<p>Zero remorse. No more <em>"if run this model for 20 hours and it doesn’t converge it will be a waste of money"</em> mindset.<p>Since I set up the server I’m constantly trying new stuff and writing more code.<hr><p>I hope you enjoyed the reading and give home servers a try. It was very fun to learn about internet networking and very practical to learn how to access my GPU everywhere.<p>Have a good day!</section></article></main><div class=giscus></div><script async crossorigin issue-term=pathname repo=YOUR_NAME/YOUR_REPO src=https://utteranc.es/client.js theme=github-light></script><footer><div class=footer-content><p>100% human written content by Pipe Galera © 2025. Theme: <a href=https://github.com/not-matthias/apollo>Apollo</a>.</div></footer></div>